#man lsof
LOSF(8)     系统管理手册 LSOF(8)
名称：
	 lsof - list open files

概要：
	 lsof  [  -?abChlnNOPRtUvVX  ] [ -A A ] [ -c c ] [ +c c ] [
       +|-d d ] [ +|-D D ] [ +|-e s ] [ +|-f [cfgGn] ] [ -F [f] ]
       [  -g  [s]  ]  [ -i [i] ] [ -k k ] [ -K k ] [ +|-L [l] ] [
       +|-m m ] [ +|-M ] [ -o [o] ] [ -p s ] [ +|-r [t[m<fmt>]] ]
       [  -s [p:s] ] [ -S [t] ] [ -T [t] ] [ -u s ] [ +|-w ] [ -x
       [fl] ] [ -z [z] ] [ -Z [Z] ] [ -- ] [names]

详情：
	Lsof 修正版4.87在输出文件中列出了进程打开的文件信息，对以下unix 版本；
		苹果达尔文9和Mac OS X10.[567]
		FreeBSD4.9和6.4基于x86系统；FreeBSD8.2，9.0和10.0基于AMD64系统；linux 2.1.72和之前的基于x86系统，Solaris 9,10和11
	查看手册的分配[DISTRIBUTION]章节查看如何获得lsof最新版本。 
	一个打开的文件可以是一个规则文件，一个目录，一个特殊块文件，一个特殊字符文件，一个执行中文本引用，一个库，一个流或者一个网络文件(网络套接字，NFS文件或Unix域套接字)。一个特殊文件或者所有文件只要在文件系统就可以通过路径定位。
	并发格式化输出，losf产生能被其它程序理解(剖析)的输出。查看—F，选项描述和OUTPUT FOR OTHER PROGRAMS一节获取更多信息。
	为了产生一个输出列表，lsof以重复模式运行。在这个模式它将先延迟产生输出，然后重复输出操作直到被中断打断或者信号退出。查看 +|-r [t[m<fmt>]] 选项描述获得更多信息。

选项：
	缺省选项时，lsof列出所有活动进程的所有打开的文件。
	
	如果指明了任何请求选项，其它选项必须指明请求 - (?)，例如 如果指定了—U去列出UNIX套接字文件，NFS文件不会被列出，除非 —N也指定了；或者是一个用户列表指定了-u选项,UNIX领域套接字文件，不属于列表的用户，不会被列出除非-U选项被指定。(&直到)
	特殊规定的普通选项 是 ORed(或关系) 例如，指定-i选项不带地址并且-ufoo 选项产生一列所所有网络文件或者属于用户foo进程的文件。除了：
	1）指定了-u选项 否定'^' 登录名或者UID
	2)指定了-p选项，否定'^'进程id
	3)指定了-g选项，否定'^'进程组id
	4)指定-c选项，否定命令
	5)指定-s[p:s]选择，否定TCP或UDP协议规定名称。

除了他们的表现外，他们执行即非Or也非AND并且在任何选项生效前应用产生影响。
	-a选项可能用来anded选项。例如 指定 -a,-U,和-ufoo 产生一个'foo'用户进程拥有的unix套接字。
	注意: -a选项导致所有的列表选项执行ANDed;它不能用来是一对选项交集通过放在两个选项之间。无论-a放在那里，它导致所有选项交集
[使用分割选项]	
	相同小结集合的选项- 命令名，文件描述符，网络地址，进程标识符，用户标识符，区域名，安选上下文 - 通过简单Ored合并在求交集前。因此，例如指定了 -i@aaa.bbb -i@ccc.ddd,-a和-ufff,ggg 将选择属于用户fff 或 ‘ggg’并且有网络连接到‘aaa.bbb’或'ccc.ddd'的文件。
    选项通过单个前缀 -- 组合在一起，例如选项设置``-a -b -C``可以规定为-abc.但是,紧跟 +|-f,-F,-g,-i,+|-L,-o,+|-r,-s,-S,-T,-x和-z的值是可选的，当你没有可选值时，当心接下来的字符串是有二义性的。例如，-Fn可能代表 —F和-n选项或者显示第n字段标识符字符串紧跟-F选项。当有歧义时，用‘-’开始新选项。如果下个选项是文件名，使用‘--’跟着歧义选项例如 '-F --name'.
    '+'或者‘-’前缀将应用到一组选项。非单独的选项(例如-i),可能和其它前缀一组。因此，'+M -i'可能定为 '+Mi' 并且组合分开选项含义相同。小心组前缀，当多个选项在一个组时。使用分割前缀选项。
    -？-h 这两个等价的选项选择一个使用的列表(help)。lsof 展示一个这个文档的短格式输出当它发现提供了一个错误选项，在他展示了分析的错误信息后。(除了?字符串）
    -a 引起列表选项求交集，就像上面描述的。
    -A A 通过静态模块实现的AFS(a distributed filesystem)核心代码的可能的系统配置下。它允许lsof用户去指定A作为作为代替的名字列表文件核心地址静态模块可能被发现的地方。查看lsof FAQ（FAQ章节提供了它的位置）更多信息静态模块，它们的语法，它们怎么影响lsof.
    -b 使lsof避免会阻塞的内核函数 -lstat(2),readlink(2)和stat(2)
        查看BLCOKS AND TIMEOUTS 和 AVOIDING KERNEL BLOCKS 小结获得使用选项的更多信息。
    -c (c) 选择以(c)开头的进程执行命令的文件列表。多个命令可以被指定通过多个-c项。他们以ORed组合在参与到AND 项小结时。
如果 (c) 以‘……’开头，是忽略语法。
如果(c)以（‘/’）开头并结尾，斜线中间的字符被解析为正则表达式。Shell在正则表达式中的元字符必须被引号引起以避免被shell解析。关闭斜线必须跟着这些修改元素。
    b   一个基本的正则表达式
    i   忽略字符大小写
    x   扩展正则表达式(默认)
查看lsof FAQ(本地的FAQ章节)获得更多信息关于基本和扩展正则表达式
首先测试一个简单命令规格说明书。如果测试失败，命令正则表达式应用。如果成功，命令正则测试不再创建。它会导致没有找到的正则:'' 信息当 lsof's -V 选项时指定的。
    +c (w)  定义名字初始化字符的最大数，由UNIX版本支持，UNIX命令关联一个进程去输出到COMMAND列.（lsof 默认是9）
    记住很多UNIX版本不支持全部的命令名给lsof在文件和结构中来自lsof获取的命令名。UNIX版本经常限制字符数支持在这些资源。例如 linux2.4.27和Solaris 9都限制命令长度到16字符。
如果(w)是零（‘0’），所有UNIX版本支持的命令字符都会被输出
如果(w)少于列标题的长度·COMMAND·,它将被增加到那个长度。

-C  使从内核命名缓存种的任何路径名组件报告无效。查看KERNEL NAME CACHE 章节获得更多信息

+d (s) 使lsof查询所有的打开的目录实例(s) 和它包涵的顶级文件和目录。+d 并不遗传以(s)为root的目录树。+D (D)项用来去请求完全降级目录以目录(D)为根。
    执行+D项，不追踪在D中的符号链接除非指定了-x |-x l项。也不查询文件系统中D的子目录打开文件除非指定了-x|-x f 项。
    备注：用户使用这个选项的权利限制它去查询用户有权限检测的文件通过系统函数stat(2).
    未来备注：TODO 补充
-D (D) 
    指导lsof使用设备缓存文件。这个选项的使用有时是受限的(YY)。查看 DEVICE CACHE FILE 一节和它接
    下来的获得更多信息。
    -D 必须跟着一个函数字母；函数字母可选的跟着一个路径名。Lsof认可这些函数字母：
        ？- 报告设备缓存文件路径
        b - 编译设备缓存文件
        i - 忽略设备缓存文件
        r - 读取设备缓存文件
        u - 读取和更新设备缓存文件
    b,r和u函数伴随着一个路径名有时是受限的。当这些函数受限时，它们不会显示在—D选项的描述中伴随着-h或者-？选项输出。查看 DEVICE_CACHE_FILE一节和紧跟它的章节获得这些函数的而更多信息和他们何时受限。
    ？函数报告只读和写路径lsof可使用的为设备缓存文件，lsof形成设备缓存文件路径时，将检测的任何环境变量名和形成个人设备缓存路径格式(?).（避免'?'字符串作为你的shell需要的）
    当可用时，b,r,u函数将跟着设备缓存文件路径。标准默认值是.lsof_hostname在真实用户id的家目录(在其中执行lsof),但是这可能被改变当lsof被配置和编译。(-h和-？项的输出展示了目前木人前缀 例如 '.lsof').后缀 (hostname)是gethostname(2)获得的主机名的第一个元素
    当可用时，b 函数指导lsof去构建一个新的设备缓存文件再默认或者特别路径。
    
    i函数指导lsof去忽略默认设备缓存文件并且通过指挥调用内核获取它们关于设备的信息。
                                        r函数指导lsof去读设备缓存再默认或者指定路径，但是阻止它创建一个新的设备缓存文件当兵部存在或者存在一个不适当的结构时。r函数当不带路径使用时，阻止lsof 更新一个错误或者过时的设备缓存文件或者创建一个新的在它的位置。r函数总是可用的当它不带路径指定时，它可能被lsof进程权限限制。
     当可用时，u函数指导lsof去读设备缓存文件在默认或者指定路径中，如果可能并且取重构它，如果需要。这是一个默认设备缓存文件函数当-D想没有被指定时。

+|-e (s)
    是路径为(s)文件系统免除可能阻塞的内核函数调用影响。+e免除stat(2)、lstat(2)和大多数readLik(2)内核函数调用。-e 选项仅免除stat(2）和lstat(2)内核函数调用。多文件操作系统将被指定分割的+|-e 说明书并且每个可能含有readlink(2)调用免除的或者没有。

    这个选项当前仅实现在Linux.

    ⚠️：：这个选项很容易忽略使用对于除了文件系统有兴趣，因为它使用路径名而非更可靠的设备和索引节点号。(设备和索引节点数是通过潜在的阻塞stat(2)内核调用捕获的并且因此不可获得，但是查看+|-m (m)选项作为一个可选的方式去支持设备号。)超级小心地使用这个选项，完全指定被豁免的文件系统路径名。
    当打开文件在被报告的豁免的文件系统，可能不能获得它们的全部信息。因而，一些信息列将是空的，字符串'UNKN' 作为值的前言在TYPE 列中，豁免选项在括号中添加到NAME列的结尾。(一些设备号信息可能通过+|-m（m）选项获得。)





























































	
